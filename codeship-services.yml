api:
  build:
    image: 457201446358.dkr.ecr.eu-central-1.amazonaws.com/hqtrust-core-api
    dockerfile_path: Dockerfile
  depends_on:
    - db
  cached: true
deploy:
  build:
    dockerfile_path: Dockerfile-deploy
  encrypted_env_file: deployment-k8s.env.encrypted
  environment:
    - SERVICE_NAME=hqtrust-core-api
    - DEPLOYMENT_NAME=hqtrust-core-api-deployment
db:
  image: healthcheck/postgres:alpine
  environment:
    POSTGRES_USER: hqtrust_core_api
    POSTGRES_DB: 86RRfQkPw93NYDyX
dockercfg-generator:
  image: codeship/aws-ecr-dockercfg-generator
  add_docker: true
  encrypted_env_file: deployment-ecr.env.encrypted
  environment:
    - AWS_REGION=eu-central-1
kubectl-deployment:
  image: 457201446358.dkr.ecr.eu-central-1.amazonaws.com/kubectl-deployment
  encrypted_env_file: deployment-k8s.env.encrypted
  dockercfg_service: dockercfg-generator
  environment:
    - SERVICE_NAME=hqtrust-core-api
    - DEPLOYMENT_NAME=hqtrust-core-api-deployment
